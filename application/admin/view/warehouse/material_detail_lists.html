<style>    div.printcent {        /*position: absolute;*/        left: -100px;    }    .qrcodeimg {        margin: 1px;        width: 200px;        /*height: 151.8px;*/        /*transform:scale(0.8)*/    }    /*input[type='checkbox'] {        display: none;    }*/    input[type='checkbox'] + label {        border-radius: 4px;        display: inline-block;        cursor: pointer;        /*height: 155px;*/        width: 204px;        margin-bottom: 2px;        margin-right: 2px;        line-height: 36px;        background: #fff;        border: 1px solid #ccc;        text-align: center;        font-weight: bold;        font-size: 18px;    }</style><script>    $(function(){        mdl_qr.select();    })</script><div class="canvas_title do-clear">    <ul class="tab_btn tab_btn_fl fl">        <li><a href="{:url('/admin/warehouse/materialDetailDo','action=Add')}">添加</a></li>         <li><a href="javaScript:materialdetail.deleteAll('{:url('/admin/warehouse/materialDetailDel')}')">删除</a></li>                <li><a href="{:url('/admin/warehouse/exportExcel')}" download='物料.xlsx' target="_blank">导出Excel数据</a></li>        <li><a href="javaScript:print_some();">打印所选</a></li>        <li><a href="javaScript:print();">打印全部</a></li>         <li>           <select id="status">               <option value="all">全部</option>                <option value="0">未规划</option>               <option value="1">已规划入库</option>              <option value="2">已入库</option>           </select>         </li>        <li class="input"><input type="text" id="search" name="search" value=""       onkeydown="keyFun.key(event,13,search.search,[$('#search'),'{:url('/admin/warehouse/materialDetailLists')}'])"       placeholder="搜索：名称/编码" /></li>       <li><a href="javaScript:search.searchArray(['{:url('/admin/warehouse/materialDetailLists')}','search','status'])">搜索</a></li>    </ul>    {$pageDiv}</div><div class="canvas_intro">    <table class="productli">        <thead>            <tr>                <th width="10" class="center">#</th>                <th width="10" class="center"><input name="" type="checkbox" value="" id="select" /></th>                <th width="140">物料名称</th>                                <th width="140">库位</th>                                <th width="50" class="center">入库数量/库存</th>                <th width="50" class="center">价格</th>                <th width="100" class="center">供应商</th>                <!--<th width="100" class="center">二维码</th>-->                <th width="36" class="center">状态</th>                                <th width="36" class="center" >入库状态</th>                <th class="center" width="200">操作</th>            </tr>        </thead>        <tbody>            {volist name='list' id='value' key='k'}            <tr>                <td class="center">{$k}</td>                <td class="center"><input name="select" type="checkbox" value="{$value.id}" /></td>                <td>{$value.name}</td>                                <td>{$value.warehouse_num}</td>                <td class="center">{$value.count}/{if  condition="$value.whmdetail.status=='2'" }{$value.whmdetail.count}{else}0{/if}</td>                <td class="center">￥{$value.money|sprintf='%.2f',###}</td>                <td class="center">{$value.upplier.company}</td>                <!--<td class="center"><img src=":url('/admin/productionstatusset/getProStaCodeBar','text='.$value.id.'&ab='.$value.name)" /></td>-->                <td class="center radio" >{if condition="$value.status=='1'"}<span>合格</span>{else}<span class="close">瑕疵品</span>{/if}</td>                                <td   class="center radio">                    {if condition="$value.whmdetail.status=='2'"}                        <span>已入库</span>                    {elseif condition="$value.whmdetail.status=='1'"}                        <span style="background: #D2691E;">已规划</span>                     {elseif condition="$value.whmdetail.status=='0'"}                        <span class="close">未规划</span>                     {/if}                 </td>                <td class="center operation">                    <a href="{:url('/admin/warehouse/viewMaterial','id='.$value.material_id)}">查看仓库</a>                                        <a href="{:url('/admin/warehouse/materialDetailDo','action=edit')}?id={$value.id}">编辑</a>                                                            <a {if condition="$value.whmdetail.status=='2'"}{else}href="javaScript:materialdetail.delete('{$value.id}','{:url('/admin/warehouse/materialDetailDel')}')"{/if}>删除</a>                                   </td>            </tr>            {/volist}        </tbody>    </table></div><div class="canvas_title do-clear">    <ul class="tab_btn tab_btn_fl fl">        <li><a href="javaScript:print_some();">打印所选</a></li>        <li><a href="javaScript:print();">打印全部</a></li>    </ul>    {$pageDiv}</div><!--<br/> <br/><br/> <br/><br/> <br/><br/> <br/><br/> <br/><br/> <br/><br/> <br/><br/> <br/>--><div class="printcent" id="printcent" style="display: none;">    {volist name='list' id='value' key='k'}        <div id="print{$value.id}" class="printdiv no-print"><input class="printinput no-print" type="checkbox" name="printqrcode"  id="printqrcode{$value.id}" value="print{$value.id}"><label for="printqrcode{$value.id}">            <img class="qrcodeimg" src="{:url('/admin/warehouse/getclQrCode').'?text='.$value.id.'&name='.$value.name.'&shelf_code='.$value.warehouse_num.'&p_time='.$value.purchases_date.'&p_size='.$value.size.'&num='.$value.count.'&fac='.$value.upplier.company}"/></label></div><!--<div id="heiprint$value.id" class="hei no-print" style="height:750px;"></div>--><div style="page-break-after:always;"></div>        {/volist}</div><script type="text/javascript" src="{:ADMIN_STYLE_URL}js/jquery.min.js"></script><script type="text/javascript" src="{:ADMIN_STYLE_URL}js/jQuery.jsprint.js"></script><script>    var mdl_qr = {        windowurl:"",        openWindow:function(url){            $("#swfbox").show();            if(mdl_qr.windowurl!=url){                mdl_qr.windowurl=url;                $("#swfbox").html("");                mdl_qr.loadURL({});            }        },        close_select:function(){            //$("#select").change(function(){            $("input[name=printqrcode]").prop('checked',0);//,$("#select").prop("checked")            $("div.printdiv").addClass('no-print');//,$("#select").prop("checked")            $("div.hei").addClass('no-print');            //})        },        select:function(){            $("#select").change(function(){                $("input[name=select]").prop('checked',$("#select").prop("checked"));            })        },        close: function () {            $("#swfbox").hide();        },        loadURL:function(obj){            $.post(mdl_qr.windowurl,obj,function(data){                $("#swfbox").html(data);            })        },    };    function print() {        $("#printcent").show();        $("input[name=printqrcode]").prop('checked', 1);//,$("#select").prop("checked")        $("div.printdiv").removeClass('no-print');//,$("#select").prop("checked")        $("div.hei").removeClass('no-print');        $("#printcent").print({            globalStyles: true,            mediaPrint: true,            stylesheet: null,            noPrintSelector: ".no-print",            iframe: true,            append: null,            prepend: null,            manuallyCopyFormValues: true,            deferred: $.Deferred(),            timeout: 90000000,            title: null,            doctype: '<!doctype html>'        });        $("#printcent").hide();    }    function print_some() {        $("div.printdiv").addClass('no-print');        $("div.hei").addClass('no-print');        var idarr=[];        $('input:checkbox[name=select]:checked').each(function(k){            if($(this).val()!='')idarr.push('print' + $(this).val());        });        if (idarr.length <= 0) {            alert('请选择要打印的图片');            return;        }console.log(idarr);        for (var i = 0; i < idarr.length; i++) {            $("#"+idarr[i]).removeClass('no-print');            $("#hei"+idarr[i]).removeClass('no-print');        }        //$("input[name=printqrcode]").prop('checked', 1);//,$("#select").prop("checked")        //$("div.printdiv").removeClass('no-print');//,$("#select").prop("checked")        $("#printcent").show();        $("#printcent").print({            globalStyles: true,            mediaPrint: false,            stylesheet: null,            noPrintSelector: ".no-print",            iframe: true,            append: null,            prepend: null,            manuallyCopyFormValues: true,            deferred: $.Deferred(),            timeout: 90000000,            title: null,            doctype: '<!doctype html>'        });        $("#printcent").hide();    }</script>