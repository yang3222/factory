<link rel="stylesheet" href="{:ADMIN_STYLE_URL}css/warehouse.css" type="text/css" media="screen" /><script>$(function(){    warehousetable.start();        var kyoPopupMenu={};        kyoPopupMenu = (function(){            return {            sys: function (obj){                $('.popup_menu').remove();                popupMenuApp = $('<div class="popup_menu app-menu"><ul><li><a menu="menu1">放入</a></li><li><a menu="menu2">编辑</a></li></ul></div>')                        .find('a').attr('href','javascript:;')                        .end().appendTo('body');                //绑定事件                $('.app-menu a[menu="menu1"]').on('click', function (){                                        if($(obj.target).is('label') == false ||  $(obj.target).attr('class')!='materialred'){                       alert('请右键选择库里面的材料');                        $('.popup_menu').hide();                        return;                    }                    var targetId = obj.target.id;                                        var arr = targetId.split('_');                                        targetId = arr[1];                                        openModel.openWindow('{:url('/admin/warehouse/getMaterials','type=one')}'+'?wtm_id='+targetId+'&m_id='+'{$m_id}');                                       $('.popup_menu').hide();                });                $('.app-menu a[menu="menu2"]').on('click', function (){                                       if($(obj.target).is('label') == false  ||  $(obj.target).attr('class')!='materialred' ){                       alert('请右键选择库里面的材料');                        $('.popup_menu').hide();                        return;                    }                    var targetId = obj.target.id;                                        var arr = targetId.split('_');                                        targetId = arr[1];                                        openModel.openWindow('{:url('/admin/warehouse/getMaterials','type=bath')}'+'?wtm_id='+targetId+'&m_id='+'{$m_id}');                                       $('.popup_menu').hide();                });                 return popupMenuApp;            }        }})();    //取消右键    $('.product').on('contextmenu', function (){return false;}).click(function(){        $('.popup_menu').hide();    });    //桌面点击右击    $('.materialred').on('contextmenu',function (e){        var popupmenu = kyoPopupMenu.sys(e);        l = ($(document).width() - e.clientX) < popupmenu.width() ? (e.clientX - popupmenu.width()) : e.clientX;        t = ($(document).height() - e.clientY) < popupmenu.height() ? (e.clientY - popupmenu.height()) : e.clientY;        popupmenu.css({left: l,top: t}).show();        return false;    });})</script><div class="canvas_title do-clear">    <ul class="tab_nav fl">        <li class="current"><a href="javaScript:void(0)">{$name} 准备入库</a></li>    </ul>    </div><div class="canvas_intro">                <br/><br/><br/>    <h5 align='center' class="tip">请从对选中颜色的位置右键进行操作</h5>    <br>   {volist name='$list'  id='v' key='k'}             <h5 align='center' class="title">仓库名称：{$v.name}</h5>       <table class="product" >                        {for start="$v.x" end="0" comparison="gt" step='-1'  name="i"}                    <tr>                                        {volist name='$v.warehouseTables'  id='vt' key='kt'}                                                {if condition="$i==$vt.p_x"}                                {assign name="childs" value=":GetWarehouseChild($vt.id)"}                                {if condition="!empty($childs)"}                                <td name='father' >                                    <table class="productchild" >                                        <tr>                                            {volist name='$childs'  id='vc' key='kc'}                                            <td name='child' id="{$vc.id}"> <input type='hidden' id='volume_{$vc.id}' name='volume' value="{$vc.volume}"  readonly='readonly' >                                                {assign name="materials" value=':GetTargets("select * from ink_wtable_material where wt_id=".$vc.id." and status = 1")'}                                                {if condition='!empty($materials)'}                                                <label  class='title'>{$vc.name}计划入库</label><br>                                                 {volist name='$materials'  id='vm' key='km'}                                                                                                       <label class='material' id="label_{$vm.id}">{$vm.m_name}</label><br>                                                {/volist}                                                {else}                                                    <label  class='title'>{$vc.name}<br>                                                     空                                                    </label>                                                {/if}                                            </td>                                            {/volist}                                        </tr>                                    </table>                                </td>                                {else}                                    <td name='father' id="{$vt.id}"><input type='hidden' id='volume_{$vt.id}' name='volume' value="{$vt.volume}" readonly='readonly'>                                        {assign name="materials" value=':GetTargets("select * from ink_wtable_material where wt_id=".$vt.id." and status = 1")'}                                        {if condition='!empty($materials)'}                                        <label class='title'>{$vt.name}计划入库</label><br>                                         {volist name='$materials'  id='vm' key='km'}                                                                                    <label class='material' id="label_{$vm.id}">{$vm.m_name}</label><br>                                                                                {/volist}                                        {else}                                            <label  class='title'>{$vt.name}<br>                                                 空                                            </label>                                        {/if}                                    </td>                                {/if}                            {/if}                      {/volist}                     </tr>            {/for}    </table>      {/volist}</div><div class="message" id="tip_windows">    <div class="box">        <h3><label id='title'><label><a href="javaScript:windowoperation.hide($('#tip_windows'))" class="close"><img src="{:ADMIN_STYLE_URL}images/closecut.png" /></a></h3>        <br>           <input name="" type="hidden" value="" id="wtm_id" />        <br>        <li align='center'>            <label id="label_name">数量：<i>*</i></label>            <input type="text" value="" id="material_number" />        </li>    <br>        <div class="btn"><a href="javaScript:warehousetable.delPlan('post','','','');">确认</a><a href="javaScript:warehousetable.closeTip();">取消</a></div>    </div></div><script>    {volist name='$mlist'  id='v' key='m'}            $('#label_'+{$v.id}).attr('class','materialred');                {/volist}    </script>