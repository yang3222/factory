<?phpnamespace app\user\controller;use \app\user\model\Productfactory;use \think\Db;/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of Index * * @author 27532 */class Product extends Base{    //put your code here    protected $pageTotalItem=40;    public function __construct() {        parent::__construct();        $this->assign('title','产品管理');        $this->assign('currentMenu',array('menu'=>'menu2','nav'=>'nav0'));    }    public function index(){               $productfactory=new Productfactory();                $data=$productfactory->where('factory_id','=',$this->user_id)->order('product_id desc')->group('product_id')->paginate($this->pageTotalItem,false,['query' =>request()->param()]);               $this->assign('data',$data);        $this->assign('pageDiv', $data->render());                return $this->fetch();    }         public function openwindows(){        $this->view->engine->layout(false);        $search=input('post.search','','trim');                $db=Db::view('product a','*');                $modeldata=$db->view('product_factory b','product_id','b.product_id=a.id')->Distinct(true)->order('id', 'desc');               if(!empty($search)){            $whereor=array(                                'name'=>['like',"%{$search}%"],                'product_id'=>"{$search}",            );                           $modeldata->whereor($whereor);                    }        $where['factory_id']=$this->user_id;                $modeldata->where($where);                $data=$modeldata->select();         $this->assign('list',$data);        return $this->fetch();    }}